<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>

    <title></title>
    <script src="Scripts/modernizr-2.6.2.js"></script>
</head>
<body>

    <form id="form" onsubmit="InviaMessaggio()">
        <input type="text"id="Messaggio" name="msg" value="Your message" />
        <input type="checkbox" onchange="InviaMessaggio()"/>
    </form>

    <div>
        <iframe id="Mappa" width="1024" height="680" src="HtmlInterno.html"></iframe>
    </div>
    <script type ="text/javascript">
        function InviaMessaggio(){
            var win = document.getElementById("Mappa").contentWindow;
            var messaggio = fetchStatus(document.getElementById("Messaggio").value);
            win.postMessage(messaggio, "http://localhost:56909");
        }
        function fetchStatus(address) {

            var risultato = "File non trovato!";
            var client = new XMLHttpRequest();

            client.onreadystatechange = function () {
                // in case of network errors this might not give reliable results
                if (client.readyState == 1) {
                    if (client.status == 200) {
                        risultato = address;
                    }
                    else {
                        risultato = "File non trovato!"
                    };
                };
            }
            client.open("HEAD", address);
            client.send();
            return risultato;
        }
    </script>

</body>
</html>
